{% extends "layout.html" %}

{% block title %}
	Home
{% endblock %}

{% block body %}
	<h2>Todo List</h2>
	<div class="visible">
		<div>
			<table>
				<thead>
					<tr>
						<th>S/N</th>
						<th>Name</th>
						<th>Category</th>
						<th>Description</th>
				</thead>
				<tbody>
					{% for value in data %}
						<tr>
							<td>{{ value[0] }}</td>
							<td>{{ value[2] }}</td>
							<td>{{ value[3] }}</td>
							<td>{{ value[4] }}</td>
							<td><button onclick="openModifyTodoPopup({{ value[0] }})">Modify</button></td>
							<td><button onclick="openDeleteTodoPopup({{ value[0] }})">Delete</button><td>
						</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>
		<div>
			<button type="button" onclick="openAddTodoPopup()">Add Todo</button>
		</div>
	</div>
	<div class="hidden" id="add_todo">
		<div>
			<h3>Add Todo</h3>
			<form action="/write" method="post">
				<label for="name">Name:</label>
				<br>
				<input id="name" type="text" name="todo_name">
				<br>
				<label for="category">Category:</label>
				<select id="category" name="category">
					<option disabled value="" selected>Category</option>
					{% for category in categories %}
						<option value={{ category }}> {{ category }}</option>
					{% endfor %}
				</select>
				<br>
				<label for="description">Description:</label>
				<textarea name="description" id="description"></textarea>
				<br>
				<button type="submit">Submit</button>
				<button type="button" onclick="closeAddTodoPopup()">Close</button>
			</form>
		</div>
	</div>
	<div class="hidden" id="delete_todo">
		<div>
			<h3>Delete?</h3>
			<p>Are you sure you want to delete this todo?</p>
			<table>
				<thead>
					<tr>
						<th>S/N</th>
						<th>Name</th>
						<th>Category</th>
						<th>Description</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td id="delete_todo_id"></td>
						<td id="delete_todo_name"></td>
						<td id="delete_todo_category"></td>
						<td id="delete_todo_description"></td>
					</tr>
				</tbody>
			</table>
			<button type="button" onclick="confirmDelete()">Confirm</button>
			<button type="button" onclick="closeDeleteTodoPopup()">Close</button>
		</div>
	</div>
	<div class="hidden" id="modify_todo">
		<div>
			<h3>Modify</h3>
			<form action="/modify" method="put">
				<label for="name">Name:</label>
				<br>
				<input type="text" id="name" name="todo_name">
				<br>
				<label for="category">Category:</label>
				<select id="category" name="category">
					{% for category in categories %}
						<option value={{ category }}>{{ category }}</option>
					{% endfor %}
				</select>
				<br>
				<label for="description">Description:</label>
				<textarea name="description" id="description"></textarea></textarea>
				<br>
				<button type="submit" onclick="confirmModify()">Submit</button>
				<button type="button" onclick="closeModifyTodoPopup()">Close</button>
			</form>
	
		</div>
	</div>
{% endblock %}
