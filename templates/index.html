{% extends "layout.html" %}

{% block title %}
	Home
{% endblock %}

{% block body %}
	<button onclick="logOut()" class="button">Log out</button>
	<h2>Todo List</h2>
	<div">
		<div>
			<table>
				<thead>
					<tr>
						<th>Name</th>
						<th>Category</th>
						<th>Description</th>
				</thead>
				<tbody>
					{% for value in data %}
						<tr class="task-card">
							<td>{{ value[2] }}</td>
							<td>{{ value[3] }}</td>
							<td>{{ value[4] }}</td>
							<td><button onclick="openModifyTodoPopup({{ value[0] }})" class="button">Modify</button></td>
							<td><button onclick="openDeleteTodoPopup({{ value[0] }})" class="button">Delete</button><td>
						</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>
		<div>
			<button type="button" onclick="openAddTodoPopup()" class="button">Add Todo</button>
		</div>
	</div>
	<div class="hidden" id="add_todo">
		<div class="popup_cover">
			<div class="popup">
				<h3>Add Todo</h3>
				<form action="/write" method="post">
					<label for="name">Name:</label>
					<br>
					<input id="name" type="text" name="todo_name">
					<br>
					<label for="category">Category:</label>
					<select id="category" name="category">
						<option disabled value="" selected>Category</option>
						{% for category in categories %}
							<option value={{ category }}> {{ category }}</option>
						{% endfor %}
					</select>
					<br>
					<label for="description">Description:</label>
					<textarea name="description" id="description"></textarea>
					<br>
					<button type="submit" class="button">Submit</button>
					<button type="button" onclick="closeAddTodoPopup()" class="button">Close</button>
				</form>
			</div>
		</div>
	</div>
	<div class="hidden" id="delete_todo"><div class="popup_cover">
		<div class="popup_cover"></div>
			<div class="popup">
				<h3>Delete?</h3>
				<p>Are you sure you want to delete this todo?</p>
				<table>
					<thead>
						<tr>
							<th>Name</th>
							<th>Category</th>
							<th>Description</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td id="delete_todo_name"></td>
							<td id="delete_todo_category"></td>
							<td id="delete_todo_description"></td>
						</tr>
					</tbody>
				</table>
				<button type="button" onclick="confirmDelete()" class="button">Confirm</button>
				<button type="button" onclick="closeDeleteTodoPopup()" class="button">Close</button>
			</div>
		</div>
	</div>
	<div class="hidden" id="modify_todo">
		<div class="popup_cover">
			<div class="popup">
				<h3>Modify</h3>
				<form>
					<label for="modify_todo_name">Name:</label>
					<br>
					<input type="text" id="modify_todo_name" name="todo_name">
					<br>
					<label for="modify_todo_category" >Category:</label>
					<select id="modify_todo_category" name="category">
						<option value = "" selected disabled>Category</option>
						{% for category in categories %}
							<option value={{ category }}>{{ category }}</option>
						{% endfor %}
					</select>
					<br>
					<label for="modify_todo_description">Description:</label>
					<br>
					<textarea name="description" id="modify_todo_description"></textarea></textarea>
					<br>
					<button type="button" onclick="confirmModify()" class="button">Submit</button>
					<button type="button" onclick="closeModifyTodoPopup()" class="button">Close</button>
				</form>
		
			
			</div>
		</div>
	</div>
{% endblock %}
